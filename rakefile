
require_relative "rakefile.tools"
require 'fileutils'

task :default => :help

desc "Build the whole project"
task :build => ['tools:core:build']

desc "says hello"
task :help do
	print("Welcome to Nodable's rakefile.\nFor more info, run: rake --tasks\n")
end

desc "Install dependencies"
task :install do
    case TARGET_OS
    when "linux-gnu"
        system "sudo apt-get update && sudo apt-get install libegl1-mesa-dev libdbus-1-dev libgtk-3-dev" or raise "Unable to install packages"
    when "darwin22"
        system "brew install mesalib-glw" or raise "Unable to install packages"
    else
        raise("Unhandled operating system: #{TARGET_OS}")
    end
end

task :clean do
    if File.exists?(BUILD_DIR)
        FileUtils.remove_entry_secure BUILD_DIR
    end
    puts "Clean OK"
end
